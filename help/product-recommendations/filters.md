---
title: 製品のフィルタリング
description: レコメンデーションとして使用される製品を含める、または除外する条件を定義します。
exl-id: 140bf047-4f6a-48da-b536-d96e78ae3d17
source-git-commit: 1b10163c39d9f309afd24aa2e808a57e069258f8
workflow-type: tm+mt
source-wordcount: '746'
ht-degree: 0%

---

# 製品のフィルタリング

Adobe Commerceは、設定不可のデフォルトフィルターをレコメンデーションユニットに自動的に適用します。 1 つのページに複数のレコメンデーションユニットがデプロイされている場合、Adobe Commerceでは、ユニットで繰り返される商品が除外されます。 他の製品を推奨する余地を残すために、繰り返し使用される製品への最初の参照のみが使用されます。 また、Adobe Commerceは、以前に購入した製品と、買い物かごに入っている製品も除外します。

レコメンデーションユニットを [&#x200B; 作成 &#x200B;](create.md) する場合、レコメンデーションに表示する製品を制御するフィルターを定義できます。 これらのフィルターは、定義した一連の包含または除外条件に基づいています。 すべてのインクルージョン条件に一致する製品のみがレコメンデーションに表示されます。 除外条件のいずれかに一致する製品は推奨されません。

複数のフィルターを設定し、各フィルターページの切り替えを選択して、必要なフィルターのみを有効にすることができます。 これにより、後で使用するためにフィルターのドラフトを作成できます。 有効なフィルターの数は、タブごとに表示されます。

## 条件

条件は、静的または動的にすることができます。

- 静的条件では、既存の製品属性を使用して、ユニットに表示できる製品を決定します。 例えば、価格が 25 ドルを超える在庫製品のみが単位に表示されるように指定できます。 静的条件は、すべてのページタイプで使用できます。

- 動的条件は、現在表示されているカテゴリや製品など、買い物客の現在のコンテキストに基づいてキーを設定します。 例えば、製品の詳細ページにデプロイする製品レコメンデーションを作成する場合、条件を作成して、現在表示している製品の相対的な価格範囲内にある製品のみをレコメンデーションできます。 動的条件は、ホームページを除くすべてのページタイプと、ページビルダーで配置されたお勧めのページで使用できます。

### 論理演算子

論理演算子 `AND` と `OR` は、複数の条件を結合するために使用されます。 包含フィルターと除外フィルターの両方を使用する場合は、推奨できる製品をすべて特定するために、最初に包含が評価され、除外フィルターに一致する製品はリストから削除されます。

- `AND` - 2 つの包含フィルタリング条件を結合します
- `OR` - 2 つの除外フィルター条件を結合します

>[!NOTE]
>
> 包含フィルターと除外フィルターは、`magento/product-recommendations` モジュールのバージョン 3.2.2 以降で従来のカテゴリの除外に置き換わります。 Adobe Commerce リリースについて詳しくは、[&#x200B; リリースノート &#x200B;](release-notes.md) を参照してください。

## フィルターのタイプ {#filtertypes}

![&#x200B; フィルター &#x200B;](assets/rec-conditions.png)

### カテゴリ

カテゴリに基づいて製品をフィルターします。 カテゴリフィルターでは、直接のカテゴリ割り当てとそのサブカテゴリを使用します。 例えば、カテゴリ `Gear` の除外条件を有効にすると、`Gear` に割り当てられた製品とそのすべてのサブカテゴリ（`Gear/Bags`、`Gear/Fitness Equipment` など）が除外されます。 同じことがカテゴリのインクルージョンフィルターにも当てはまります。 例えば、カテゴリ `Gear` のインクルージョン条件を有効にすると、`Gear` に割り当てられた製品とそのすべてのサブカテゴリ（`Gear/Bags`、`Gear/Fitness Equipment` など）が含まれます。

[ カテゴリ ] フィールドには、現在のストア レビューに属するカテゴリが表示されます。

>[!NOTE]
>
>B2B マーチャントの場合、カテゴリフィルターは、設定した [&#x200B; 顧客固有の製品カテゴリ &#x200B;](https://experienceleague.adobe.com/docs/commerce-admin/catalog/categories/category-permissions.html) に従います。

Adobe Commerceでは、ページタイプにレコメンデーションをデプロイする際に、次のカテゴリフィルター設定を使用することをお勧めします。

| ページ | フィルター条件 |
|---|---|
| ホーム | 製品はフィルタリングしないでください。 |
| カテゴリ | 特定のカテゴリの製品をフィルタリングします。 |
| 製品詳細 | 同じカテゴリの製品をフィルタリングします。 |
| カート | 買い物かご内の製品のカテゴリをフィルタリングします。 |
| 注文確認 | 購入した製品のカテゴリをフィルタリングします。 |

### 製品

製品フィルターは、レコメンデーションに表示される適格または不適格な特定の製品を指定します。 無効になっている製品や、個別に表示されていない製品は、レコメンデーションでは表示できないので選択できません。

>[!NOTE]
>
>設定可能な製品の子製品は、_個別に表示されない_ という表示が設定されているため、レコメンデーションユニットに表示されません。

### タイプ

製品タイプに基づくフィルターは、特定のタイプのすべての製品を含めるか除外します。 サポートされるタイプには、_simple_、_configurable_、_virtual_、_downloadable_、または _gift card_ があります。 _バンドル_、_グループ化_、カスタム製品タイプはサポートされていません。

### 可視性

表示に基づいて製品をフィルターします（例：_カタログ_、_検索_、またはその両方）。

### 価格

製品価格に基づくフィルターでは、最終価格を使用して比較を実行します。 最終価格には、匿名の買い物客が利用できる割引が含まれます。 B2B マーチャントの場合、表示される価格は、設定した [&#x200B; 顧客固有のグループ価格 &#x200B;](https://experienceleague.adobe.com/docs/commerce-admin/catalog/products/pricing/pricing-advanced.html) を反映しています。

### 在庫ステータス

在庫ステータスに基づいて製品を除外するには、次の除外フィルターを使用できます。

- 在庫切れ – （除外のみ）在庫切れの製品を除外します。
- 低在庫 – （除外のみ）在庫が少ない製品を除外します。 在庫が少ないステータスは、_在庫設定_ の [&#x200B; 左側が X 個のみのしきい値 &#x200B;](https://experienceleague.adobe.com/docs/commerce-admin/config/catalog/inventory.html) の値に基づきます。
