---
title: データを収集
description: イベントで  [!DNL Product Recommendations] のデータを収集する方法を説明します。
feature: Services, Recommendations, Eventing
exl-id: 0d5317e3-c049-4fcd-a8e4-228668d89386
source-git-commit: 1548b7e11249febc2cd8682581616619f80c052f
workflow-type: tm+mt
source-wordcount: '980'
ht-degree: 0%

---

# データを収集

[[!DNL Product Recommendations]](install-configure.md) をインストールして設定すると、モジュールは行動データの収集をストアフロントにデプロイします。 このメカニズムは、匿名化された行動データを買い物客から収集し、[!DNL Product Recommendations] の権限を与えます。 例えば、`view` イベントは `Viewed this, viewed that` レコメンデーションタイプの計算に使用され、`place-order` イベントは `Bought this, bought that` レコメンデーションタイプの計算に使用されます。

[ イベントが収集する行動データについて詳しくは、](https://developer.adobe.com/commerce/services/shared-services/storefront-events/#product-recommendations) 開発者ドキュメント [!DNL Product Recommendations] を参照してください。

>[!NOTE]
>
>[!DNL Product Recommendations] 用のためのデータ収集には、個人を特定できる情報（PII）は含まれません。 Cookie ID や IP アドレスなどのすべてのユーザー識別子は、厳密に匿名化されます。 詳細情報 [ 詳細情報 ](https://www.adobe.com/privacy/experience-cloud.html)。

## ヘルスケア関連のお客様

医療関係のお客様が [ データ接続 ](../data-connection/hipaa-readiness.md#installation) 拡張機能の一部である [ データサービス HIPAA 拡張機能 ](../data-connection/overview.md) をインストールした場合、[!DNL Product Recommendations] で使用されるストアフロントイベントデータは取得されなくなります。 これは、ストアフロントのイベントデータがクライアントサイドで生成されるからです。 ストアフロントのイベントデータのキャプチャと送信を続行するには、[!DNL Product Recommendations] のイベント収集を再度有効にします。 詳しくは、[ 一般設定 ](https://experienceleague.adobe.com/en/docs/commerce-admin/config/general/general.html#data-services) を参照してください。

## データタイプとイベント

Product Recommendations で使用されるデータには、次の 2 種類があります。

- **行動** – 製品表示、買い物かごに追加された項目、購入など、サイトに対する買い物客のエンゲージメントからのデータ。
- **カタログ** – 製品メタデータ（名前、価格、在庫状況など）。

`magento/product-recommendations` モジュールをインストールすると、Adobe Senseiは行動データとカタログデータを集計し、レコメンデーションタイプごとに商品レコメンデーションを作成します。 次に、Product Recommendations サービスは、推奨される製品 _項目_ を含むウィジェットの形式で、レコメンデーションをストアフロントにデプロイします。

一部のレコメンデーションタイプでは、買い物客の行動データを使用して機械学習モデルをトレーニングし、パーソナライズされたレコメンデーションを作成します。 その他のレコメンデーションタイプでは、カタログデータのみを使用し、行動データは使用しません。 サイトでの製品レコメンデーションの使用をすぐに開始する場合は、次のカタログのみのレコメンデーションタイプを使用できます。

- `More like this`
- `Visual similarity`

### コールドスタート

行動データを使用するレコメンデーションタイプの使用を開始できるのはいつですか？ 場合によります。 これは、「コールドスタート _問題と呼ば_ ます。

_コールドスタート_ の問題は、モデルがトレーニングを受けて実効を発揮するまでにかかる時間を表します。 商品レコメンデーションの場合、レコメンデーションユニットをサイトにデプロイする前に、Adobe Senseiが機械学習モデルをトレーニングするのに十分なデータを収集するのを待つことになります。 モデルのデータが多いほど、レコメンデーションはより正確で有用になります。 データ収集はライブサイトで行われるので、`magento/production-recommendations` モジュールをインストールして設定し、このプロセスを早期に開始することをお勧めします。

次の表に、各レコメンデーションタイプで十分なデータの収集に要する時間に関する一般的なガイダンスを示します。

| レコメンデーションタイプ | トレーニング時間 | 備考 |
|---|---|---|
| 人気度ベース（`Most viewed`、`Most purchased`、`Most added to cart`） | 可変 | イベントの量に依存 – 表示は最も一般的なので、より迅速に学習されます。その後、買い物かごに追加され、購入されます |
| `Viewed this, viewed that` | さらにトレーニングが必要 | 製品表示の量が急激に多い |
| `Viewed this, bought that`, `Bought this, bought that` | 最も多くのトレーニングが必要 | 購入イベントは、特に製品表示と比較して、コマースサイトで最もまれなイベントです |
| `Trending` | 人気度のベースラインを確立するために 3 日間のデータが必要です | トレンド分析は、製品の人気ベースラインと比較した、製品の人気の最近の勢いの指標です。 製品のトレンドスコアは、フォアグラウンドセット（24 時間にわたる最近の人気度）とバックグラウンドセット（72 時間にわたる人気度のベースライン）を使用して計算されます。 24 時間以内にアイテムの人気度がベースラインの人気度と比較して大幅に上昇した場合、高いトレンドスコアが得られます。 すべての製品にこのスコアがあり、スコアが最も高い項目はいつでも、上位のトレンド製品のセットで構成されます。 |

トレーニングに要する時間に影響を与える可能性があるその他の変数を次に示します。

- トラフィック量が多いほど、学習が速くなります
- 一部のレコメンデーションタイプは、他のタイプよりも高速にトレーニングされます
- Adobe Commerceは 4 時間ごとに行動データを再計算します。 レコメンデーションは、サイトで使用されるほど正確になります。

各推奨タイプのトレーニングの進行状況を視覚化できるように、「[ 推奨を作成 ](create.md#readiness-indicators)」ページに準備状況インジケーターが表示されます。

ライブサイトでデータが収集され、機械学習モデルがトレーニングされている間に、レコメンデーションを設定するために必要な他のテストおよび設定タスクを完了できます。 この作業が完了するまでに、モデルには便利なレコメンデーションを作成するのに十分なデータが含まれており、ストアフロントにモデルをデプロイできます。

ほとんどの製品 SKU でサイトに十分なトラフィック（表示、購入、トレンド）が届かない場合は、学習プロセスを完了するのに十分なデータがない可能性があります。 これにより、管理者の準備インジケーターが動かなくなったように見える場合があります。 準備状況の指標は、店舗にとって優れたレコメンデーションタイプを選択する際に、マーチャントに別のデータポイントを提供することを目的としています。 数値は目安であり、100% に達することはありません。 準備状況インジケーターについて [ 詳しくは、](create.md#readiness-indicators) こちら ] を参照してください。

### バックアップの推奨事項 {#backuprecs}

入力データが不十分で、リクエストされたすべてのレコメンデーションアイテムをユニットで提供できない場合、Adobe Commerceは、レコメンデーションユニットを設定するためのバックアップレコメンデーションを提供します。 例えば、ホームページに `Recommended for you` のレコメンデーションのタイプをデプロイした場合、サイト上で初めて買い物をする人は、パーソナライズされた製品を正確に推奨するのに十分な行動データを生成していません。 この場合、Adobe Commerceは、この買い物客に `Most viewed` のレコメンデーションタイプに基づいて項目を表示します。

入力データの収集が不十分な場合、次のレコメンデーションタイプが `Most viewed` のレコメンデーションタイプにフォールバックします。

- `Recommended for you`
- `Viewed this, viewed that`
- `Viewed this, bought that`
- `Bought this, bought that`
- `Trending`
- `Conversion (view to purchase)`
- `Conversion (view to cart)`

#### 注意事項

- 広告ブロッカーとプライバシー設定は、イベントがキャプチャされるのを防ぎ、エンゲージメントと売上高 [ 指標 ](workspace.md#column-descriptions) が過小報告される原因になる可能性があります。 さらに、買い物客のページからの離脱やネットワークの問題が原因で、一部のイベントが送信されない場合があります。
- [ ヘッドレス実装 ](headless.md) 製品レコメンデーションダッシュボードを強化するには、イベンティングを実装する必要があります。
- 設定可能な製品の場合、Product Recommendations では、レコメンデーションユニット内の親製品の画像を使用します。 設定可能な製品に画像が指定されていない場合、その特定の製品のレコメンデーションユニットは空になります。

>[!NOTE]
>
>[Cookie 制限モード ](https://experienceleague.adobe.com/docs/commerce-admin/start/compliance/privacy/compliance-cookie-law.html) が有効になっている場合、買い物客が Cookie の使用を同意するまで、Adobe Commerceは行動データを収集しません。 Cookie 制限モードが無効になっている場合、Adobe Commerceはデフォルトで行動データを収集します。
