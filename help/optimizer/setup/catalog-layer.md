---
title: カタログレイヤー
description: カタログレイヤーを使用して、元のソースデータを変更せずに製品データを変更し、安全にカスタマイズして、いつでも変更を元に戻す方法を説明します。
role: Admin, Developer
recommendations: noCatalog
badgeSaas: label="SaaS のみ" type="Positive" url="https://experienceleague.adobe.com/ja/docs/commerce/user-guides/product-solutions" tooltip="Adobe Commerce as a Cloud ServiceおよびAdobe Commerce Optimizer プロジェクトにのみ適用されます（Adobeで管理される SaaS インフラストラクチャ）。"
source-git-commit: 4a904527af172a5e35b87410135d55484d07ad84
workflow-type: tm+mt
source-wordcount: '1207'
ht-degree: 0%

---

# カタログレイヤー

カタログレイヤーを使用すると、元のソースデータを変更せずに製品データを変更できます。 レイヤーは、基本カタログの上にレイヤーを作成することで、名前、説明、画像、リンク、メタデータなどの特定の製品属性に変更を適用します。 元の製品データはそのままの状態で維持されるので、製品を安全にカスタマイズして、いつでも変更を元に戻すことができます。

![&#x200B; カタログ画層 &#x200B;](../assets/catalog-layers.png)

## カタログレイヤーの仕組み

顧客がストアフロントを表示すると、システムは、基本カタログデータとアクティブなカタログレイヤーを組み合わせて、最終的な商品情報を表示します。 プロセスの仕組みを次に示します。

1. **レイヤーアプリケーション** - チャネル ID と環境 ID を使用してリクエストが行われると、ストアサービスは関連するカタログビューを取得します。

1. **データ結合** - カタログレイヤーは、レイヤーの優先順位に基づいて製品データに適用されます。

1. **フィールド処理** – 異なるフィールド・タイプは異なる方法で処理されます：

   - **フィールドをオーバーライド** – 名前、説明、メタタイトルなどのテキストフィールドは、レイヤーで定義された値に置き換えられ、優先順位の高いレイヤーが優先されます。
   - **フィールドの結合** – 画像、リンク、属性などの配列フィールドを複数のレイヤーから結合して、統一された応答を提供します。

1. **優先順位の解決** – 「順序」フィールドによって、優先するレイヤーが決まります。 複数のレイヤーが同じフィールドを修正する場合、順序番号が小さいレイヤーが優先されます（例えば、順序 1 が最も高くなります）。

## カタログレイヤーのユースケース

カタログレイヤーは、一般的に次の目的で使用されます。

- **SEO の最適化** - [Sites Optimizer](../manage-results/opportunities.md) の AI レコメンデーションに基づいて、製品のメタタイトルと説明を上書きします。
- **季節的なキャンペーン** - ソースデータを変更せずに、プロモーション用の製品名、説明または画像を一時的に更新します。
- **地域ごとのカスタマイズ** – 地理的な場所や言語に基づいて異なる製品情報を表示します。
- **A/B テスト** – 様々な製品プレゼンテーションをテストして、コンバージョン率を最適化します。
- **マルチブランド管理** – 様々なブランドカタログビュー用に製品属性をカスタマイズします。

## データ取り込みによるカタログレイヤーの追加

データ取り込みプロセス中に、製品にカタログレイヤーを追加できます。 この方法は、一括操作または自動ワークフローに最適です。

>[!NOTE]
>
>カタログレイヤーは取り込み API を使用して読み込みますが、レイヤーの [&#x200B; 順序の設定 &#x200B;](#manage-layer-priorities) は UI を使用して行います。

**前提条件：**

- データ取り込みサービスにアクセスするための権限を持つ API 資格情報
- 基本カタログに既に存在する製品 SKU

**手順：**

1. 変更する製品属性を持つ必要な形式のレイヤーデータを準備します。

1. 製品レイヤー API エンドポイントを使用して、レイヤーデータを取り込みます。

1. カタログビューの設定を確認して、レイヤーが正常に取り込まれたことを確認します。

API の仕様とペイロードの例について詳しくは、開発者向けドキュメントの [&#x200B; 製品レイヤー &#x200B;](https://developer.adobe.com/commerce/services/reference/rest/#tag/Product-Layers) を参照してください。

## UI での手動によるカタログレイヤーの追加

>[!NOTE]
>
>この機能はまだ使用できません。

カタログビュー UI を使用すると、レイヤーを手動で作成および管理できます。これは、AI を利用したレコメンデーションを生成するSites Optimizerなどの統合で特に役立ちます。

>[!NOTE]
>
>カタログ ビューにSites Optimizer画層が存在しない場合、Sites Optimizerの自動修正機能によって画層が自動的に作成され、順序 1 （最も優先度が高い）に割り当てられます。 このレイヤーを削除すると、次回Sites Optimizerで自動修正機能が実行されたときに再作成され、既存のレイヤーが下位の番号にシフトします。 Sites Optimizer画層が別の注文番号に既に存在する場合、自動修正機能は優先度を変えません。

>[!TIP]
>
>一括レイヤー操作の場合は、（前述の [&#x200B; データ取り込み API メソッドを使用 &#x200B;](#add-a-catalog-layer-via-data-ingestion) ます。

**手動レイヤーを作成するには：**

1. **ストア設定**/**カタログビュー** に移動します。

1. 画層を適用するカタログ ビューを選択します。

1. [ カタログ レイヤ ] セクションで、[**カタログ レイヤを追加**] をクリックします。

1. レイヤーのプロパティを設定します。

   - **レイヤー名** - レイヤーの目的を識別する説明的な名前を入力します。
   - **製品** – このレイヤーを適用する製品を選択します。
   - **属性** – 変更する製品属性（名前、説明、画像、メタタグなど）を選択します。
   - **値** – 選択した属性ごとに新しい値を入力します。

1. **保存** をクリックして、レイヤーを作成します。

新しい画層がカタログ ビューに追加され、次に使用可能な注文番号が自動的に割り当てられます。

## レイヤー効果をプレビュー

>[!NOTE]
>
>この機能はまだ使用できません。

レイヤーをアクティブ化したり優先度を変更したりする前に、製品データに与える影響をプレビューできます。

**レイヤーの変更をプレビューするには：**

1. **ストア設定**/**カタログビュー** に移動します。

1. プレビューする画層を含むカタログ ビューを選択します。

1. 「カタログレイヤー」セクションで、特定の製品を選択するか、プレビュー機能を使用します。

1. レイヤーが基本カタログ値をどのように変更するかを示す、結合された製品データを確認します。

1. 必要に応じて、レイヤーのコンテンツや優先順位を調整します。

## レイヤーのアクティベート、アクティベート解除または削除

カタログレイヤーを削除せずに有効または無効にすることができ、特定のカスタマイズを適用するタイミングを制御できます。

**レイヤーをアクティベートまたはアクティベート解除するには：**

1. **ストア設定**/**カタログビュー** に移動します。

1. 画層を含むカタログ ビューを選択します。

1. [ カタログ画層 ] セクションで、切り替える画層を見つけます。

1. アクティベーショントグルをクリックして、レイヤーを有効または無効にします。

   - **アクティブ** - レイヤーがプロダクトデータに適用されます。
   - **非アクティブ** - レイヤーは保持されますが、製品データには適用されません。

1. 変更はストアフロントに直ちに反映されます。

**画層を削除するには：**

データ取り込み API を使用して [&#x200B; カタログレイヤーを削除 &#x200B;](https://developer.adobe.com/commerce/services/reference/rest/#operation/deleteProductLayers) します。

## レイヤーの優先度の管理

複数のレイヤーで同じ製品属性を変更する場合、レイヤーが適用される順序によって、ストアフロントに表示される値が決まります。 優先度を管理することで、正しいデータが確実に表示されます。

**優先順位について：**

- 各レイヤーにはオーダー番号（1、2、3 など）が割り当てられます
- 順序 1 は最も優先度が高く、他のすべてのレイヤーよりも優先されます
- 複数のレイヤーが同じフィールドを変更する場合は、順序番号の小さいレイヤーが優先されます
- 優先度は、上書きフィールド（名前、説明、メタタグ）にのみ適用されます
- フィールド（画像、リンク、属性）を結合すると、すべてのレイヤーのデータが結合されます

**レイヤの優先度を並べ替えるには：**

1. **ストア設定**/**カタログビュー** に移動します。

1. 並べ替える画層を含むカタログ ビューを選択します。

1. [ カタログ画層 ] セクションで、移動する画層を見つけます。

1. レイヤーをドラッグ&amp;ドロップして位置を変更するか、並べ替えコントロールを使用します。

1. 新しい順序に基づいて注文番号が自動的に更新されます。

1. **保存** をクリックして、新しい優先順位を適用します。

>[!IMPORTANT]
>
>レイヤーの優先度の変更は直ちに有効になり、ストアフロントで顧客に表示される内容に影響を与える可能性があります。 保存前にプレビューを確認し、正しい値が適用されていることを確認します（**プレビューはまだ使用できません**）。

## ベストプラクティス

カタログレイヤーを使用する場合は、次の推奨事項に従ってください。

- **わかりやすい名前を使用** - レイヤーに目的を明確に示す名前を付けます（「ホリデー 2025 キャンペーン」や「SEO の最適化 – 製品ページ」など）。

- **レイヤーを制限** - システムは複数のレイヤーをサポートしていますが、使用し過ぎるとパフォーマンスに影響を与える可能性があります。 可能な場合、レイヤーを統合します。

<!--- **Test before activating**—Always preview layer effects before activating them on your live storefront. !!!REMOVE IF PREVIEW NOT AVAILABLE FOR GA!!!-->

- **ドキュメントの優先度ロジック** – 意図しないオーバーライドを避けるために、どのレイヤーを優先するかを追跡します。

- **Sites Optimizer レイヤーのレビュー** - Sites Optimizerからの自動修正を使用する場合、最も優先度の高いレイヤーが作成されます。 AI レコメンデーションを上書きする可能性のある手動レイヤーを追加する場合は、注意が必要です。 [Sites Optimizer](../manage-results/opportunities.md) の使用方法の詳細をご覧ください。

- **パフォーマンスの監視** – 製品ページの読み込みに時間がかかる場合は、レイヤー設定を確認し、レイヤーの統合を検討します。

## その他の関連リソース

- [&#x200B; カタログビュー &#x200B;](catalog-view.md) – 様々なストアフロントのカタログビューを設定します
- [&#x200B; 機会 &#x200B;](../manage-results/opportunities.md) - カタログレイヤーを使用した AI を利用した最適化について説明します
